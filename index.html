<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Familie Einkaufsliste</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background:#0a0a0a;
            min-height:100vh;
            padding:15px;
            display:flex;
            justify-content:center;
            align-items:center;
            position:relative;
            -webkit-font-smoothing:antialiased;
        }

        /* Hintergrund-Glow (wie vorher) */
        body::before {
            content:'';
            position:fixed;
            top:0; left:0;
            width:100%; height:100%;
            background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff, #06ffa5);
            background-size:400% 400%;
            animation: gradientShift 15s ease infinite;
            opacity:0.15;
            z-index:0;
        }
        @keyframes gradientShift {
            0%{background-position:0% 50%}
            50%{background-position:100% 50%}
            100%{background-position:0% 50%}
        }

        /* Karte (Container) - jetzt ohne zus√§tzliches inner wrapper */
        .container {
            --rx: 0deg;
            --ry: 0deg;
            transform: perspective(900px) rotateX(var(--rx)) rotateY(var(--ry)) translateZ(0);
            transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 260ms ease;
            width: min(96%, 640px);
            min-height: 650px;
            padding: 60px 35px;
            border-radius: 28px;
            position: relative;
            z-index:2;
            display:flex;
            flex-direction:column;
            background: linear-gradient(135deg, rgba(22,18,34,0.98), rgba(30,25,46,0.96));
            /* 3D Tiefe durch mehrere Schattenebenen (kein extra "outer box") */
            box-shadow:
                0 46px 90px rgba(0,0,0,0.68),
                0 18px 40px rgba(3,18,30,0.45),
                0 0 30px rgba(131,56,236,0.04) inset;
            border: 1px solid rgba(131,56,236,0.18);
            will-change: transform;
        }

        /* Leuchtender Rahmen (wie vorher) */
        .container::after {
            content:'';
            position:absolute;
            top:-2px; left:-2px; right:-2px; bottom:-2px;
            background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff, #06ffa5);
            border-radius:28px;
            z-index:-1;
            opacity:0.32;
            filter: blur(14px);
            animation: borderPulse 4s infinite;
        }
        @keyframes borderPulse { 0%,100%{opacity:0.2} 50%{opacity:0.48} }

        /* Subtiles Rim‚ÄëLight (keine gro√üe zus√§tzliche Box) */
        .rim {
            position:absolute;
            inset:0;
            border-radius:28px;
            z-index:-2;
            pointer-events:none;
            background:
                radial-gradient(900px 400px at 10% 12%, rgba(131,56,236,0.05), transparent 10%),
                radial-gradient(800px 480px at 92% 12%, rgba(6,255,165,0.04), transparent 10%),
                radial-gradient(700px 500px at 50% 92%, rgba(255,6,110,0.03), transparent 14%);
            filter: blur(10px);
            transform: translateY(6px);
            opacity:0.9;
        }

        h1{
            display:flex; flex-direction:column; align-items:center; justify-content:center;
            background: linear-gradient(135deg, #ff006e, #8338ec, #3a86ff);
            -webkit-background-clip:text; -webkit-text-fill-color:transparent;
            text-align:center; margin-bottom:45px; font-size:2.4em; font-weight:900;
            z-index:2;
        }

        .input-container { display:flex; gap:12px; margin-bottom:40px; width:100%; z-index:2; }

        input{
            flex:1; min-width:0; padding:18px 22px;
            background: rgba(40,40,50,0.82);
            border:2px solid rgba(131,56,236,0.18);
            border-radius:14px; font-size:16px; color:#fff; transition:0.3s; text-align:left;
            backdrop-filter: blur(4px);
        }
        input:focus{ outline:none; border-color:#8338ec; box-shadow:0 0 28px rgba(131,56,236,0.22); }

        button{
            padding:15px 20px; background:linear-gradient(135deg,#ff006e,#8338ec);
            color:white; border:none; border-radius:12px; font-size:20px; cursor:pointer; font-weight:bold;
            flex-shrink:0; transition: transform 0.18s ease, box-shadow 0.18s ease; z-index:2;
            box-shadow: 0 8px 28px rgba(131,56,236,0.10);
        }
        button:active{ transform: translateY(2px); box-shadow:0 6px 20px rgba(131,56,236,0.08); }

        .shopping-list{ list-style:none; width:100%; margin-top:8px; z-index:2; }
        .shopping-item{
            background: rgba(45,45,55,0.82);
            padding:18px 20px; margin-bottom:12px; border-radius:14px;
            display:flex; justify-content:space-between; align-items:center;
            border:1px solid rgba(131,56,236,0.12);
            box-shadow: 0 6px 18px rgba(0,0,0,0.45);
        }
        .item-text{ color:white; font-size:18px; flex:1; }
        .delete-btn{ background:#00c853; border:none; padding:10px 15px; border-radius:12px; color:white; cursor:pointer; }
        .delete-btn:hover{ background:#00e676; box-shadow:0 0 15px #00e676,0 0 30px #00e676; transform:scale(1.05); transition:all 0.3s ease; }

        .empty-state {
            text-align:center; display:flex; flex-direction:column; align-items:center; justify-content:center;
            color: rgba(255,255,255,0.5); flex-grow:1; font-size:1.05em; z-index:2;
        }

        /* Hover: leichter Lift (wie du wolltest) */
        @media (hover:hover) and (pointer:fine) {
            .container:hover {
                transform: perspective(900px) translateY(-10px) rotateX(var(--rx)) rotateY(var(--ry));
                box-shadow:
                    0 70px 120px rgba(0,0,0,0.74),
                    0 20px 50px rgba(3,18,30,0.5);
            }
            .container:hover::after { filter: blur(12px); opacity:0.46; }
        }

        /* Mobile: volles Display wie vorher; Tilt aus */
        @media (max-width:600px) {
            body{ padding:0; }
            .container{
                width:100%; max-width:none; height:100vh; min-height:auto; border-radius:0;
                padding:36px 20px; margin:0; box-shadow:none; border:none;
                background: linear-gradient(135deg, rgba(20,20,25,0.98), rgba(24,16,36,0.95));
                transform:none !important;
            }
            .rim, .container::after { display:none; } /* Performance */
            h1{ font-size:2em; margin-bottom:28px; }
            .input-container{ margin-bottom:28px; }
            .empty-state{ flex-grow:1; justify-content:center; }
        }

        /* Tablet tweaks */
        @media (min-width:601px) and (max-width:900px) {
            .container{ max-width:720px; min-height:600px; }
            h1{ font-size:2.2em; }
        }
    </style>
</head>
<body>
    <div class="container" id="card">
        <div class="rim" aria-hidden="true"></div>

        <h1>
            <span style="font-size:1.1em; margin-bottom:8px;">üõí</span>
            Einkaufsliste
        </h1>

        <div class="input-container">
            <input type="text" id="itemInput" placeholder="F√ºge etwas hinzu! ‚ú®" />
            <button id="addBtn">+</button>
        </div>

        <ul class="shopping-list" id="shoppingList"></ul>

        <div class="empty-state" id="emptyState">
            <span>üìù Deine Einkaufsliste ist leer</span>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, onValue, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAdTqs7DJcYR_O5hw0IT7PwJntbONRaH0E",
            authDomain: "familie-einkaufsliste.firebaseapp.com",
            projectId: "familie-einkaufsliste",
            storageBucket: "familie-einkaufsliste.firebasestorage.app",
            messagingSenderId: "579605459908",
            appId: "1:579605459908:web:ffba5a7c9c4ccc60636a91"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const itemsRef = ref(database, 'shoppingList');

        onValue(itemsRef, (snapshot) => {
            const list = document.getElementById('shoppingList');
            const emptyState = document.getElementById('emptyState');
            list.innerHTML = '';
            const data = snapshot.val();

            if (data) {
                emptyState.style.display = 'none';
                Object.entries(data).forEach(([key, value]) => {
                    const li = document.createElement('li');
                    li.className = 'shopping-item';
                    li.innerHTML = `<span class="item-text">${value.name}</span>
                                    <button class="delete-btn" onclick="deleteItem('${key}')">‚úì</button>`;
                    list.appendChild(li);
                });
            } else {
                emptyState.style.display = 'flex';
            }
        });

        window.addItem = function() {
            const input = document.getElementById('itemInput');
            if (input.value.trim() !== '') {
                push(itemsRef, { name: input.value.trim(), timestamp: Date.now() });
                input.value = '';
            }
        };

        window.deleteItem = function(id) {
            remove(ref(database, `shoppingList/${id}`));
        };

        document.getElementById('itemInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addItem();
        });

        document.getElementById('addBtn').addEventListener('click', addItem);

        // 3D Tilt / Parallax (desktop only) ‚Äî subtile Effekte, mobile deaktiviert
        (function enableTilt() {
            const card = document.getElementById('card');
            if (!card) return;

            const isMobile = window.matchMedia('(max-width:600px)').matches;
            if (isMobile) return; // deaktivieren auf mobilen Ger√§ten

            function handleMove(e) {
                const rect = card.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width; // 0..1
                const y = (e.clientY - rect.top) / rect.height; // 0..1
                const rotateY = (x - 0.5) * 8;
                const rotateX = (0.5 - y) * 6;
                card.style.setProperty('--rx', rotateX + 'deg');
                card.style.setProperty('--ry', rotateY + 'deg');
                card.style.boxShadow = '0 70px 120px rgba(0,0,0,0.74), 0 20px 50px rgba(3,18,30,0.5)';
            }

            function handleLeave() {
                card.style.setProperty('--rx', '0deg');
                card.style.setProperty('--ry', '0deg');
                card.style.boxShadow = '0 46px 90px rgba(0,0,0,0.68), 0 18px 40px rgba(3,18,30,0.45), 0 0 30px rgba(131,56,236,0.04) inset';
            }

            card.addEventListener('mousemove', handleMove);
            card.addEventListener('mouseleave', handleLeave);
        })();
    </script>
</body>
</html>